/*
 * support definition interface for dw_mmc_hi3xxx
 * Copyright (c) Huawei Technologies Co., Ltd. 2019-2019. All rights reserved.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 */

#ifndef _DW_MMC_HI3XXX_
#define _DW_MMC_HI3XXX_

#include <linux/mmc/host.h>
#include <linux/mmc/dw_mmc.h>

#define EMMC_TYPE 0
#define SD_TYPE 1
#define SDIO_TYPE 2

#define LEGACY_400K 0
#define MMC_HS 1
#define SD_HS  2
#define SDR12  3
#define SDR25  4
#define SDR50  5
#define SDR104 6
#define DDR50  7
#define DDR52  8
#define HS200  9

#define VOL_SWITCH_LOOP_MAX 0x100000

#define ENABLE_CLK 0x10000

#define SD_HWLOCK_ID 11
#define SD_LOCK_TIMEOUT 1000
#define MMC_CLOCK_FREQUENCY_137 137
#define MMC_CLOCK_FREQUENCY_192 192
#define GPIO_010_SDLDO_MOS_EN 400
#define GPIO_028_VBST_5V_EN 28
#define LEVERSHIFT_HIGH 1
#define LEVERSHIFT_LOW 0

void __iomem *pericrg_base;
static void __iomem *sys_base;
static void __iomem *mmc1_sys_ctrl_base;
static void __iomem *hsdt_crg_base;
static void __iomem *hsdt1_crg_base;
static void __iomem *mmc0_crg_base;

struct dw_mci *sdio_host;
struct dw_mci *sdio_1135_host;

/* Common capabilities of hisilicon SoC */
static unsigned long g_hs_dwmmc_caps[3] = { /* for eMMC, sd, sdio */
#ifdef CONFIG_MMC_DW_EMMC_USED_AS_MODEM
	/* sdio1  - via modem */
	MMC_CAP_4_BIT_DATA | MMC_CAP_SD_HIGHSPEED | MMC_CAP_SDIO_IRQ,
#else
	MMC_CAP_8_BIT_DATA | MMC_CAP_CMD23 | MMC_CAP_ERASE,
#endif
	/* sd */
	MMC_CAP_DRIVER_TYPE_A | MMC_CAP_4_BIT_DATA | MMC_CAP_SD_HIGHSPEED |
		MMC_CAP_MMC_HIGHSPEED,
	/* sdio */
	MMC_CAP_4_BIT_DATA | MMC_CAP_SD_HIGHSPEED | MMC_CAP_NONREMOVABLE,
};

int hs_timing_config[][TUNING_INIT_TIMING_MODE][TUNING_INIT_CONFIG_NUM] = {
		/* bus_clk, div, drv_phase, sam_dly, sam_phase_max, sam_phase_min, input_clk */
		{
			/* MMC */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },      /* 0: LEGACY 400k */
			{ 400000000, 7, 6, 0, 15, 15, 50000000 },  /* 1: MMC_HS */
			{ 200000000, 7, 6, 0, 15, 15, 25000000 },  /* 2: SD_HS */
			{ 200000000, 7, 6, 0, 15, 15, 25000000 },  /* 3: SDR12 */
			{ 400000000, 7, 6, 0, 15, 15, 50000000 },  /* 4: SDR25 */
			{ 800000000, 7, 4, 0, 12, 0, 100000000 },  /* 5: SDR50 */
			{ 1600000000, 7, 5, 4, 15, 0, 200000000 }, /* 6: SDR104 */
			{ 800000000, 7, 6, 0, 7, 0, 100000000 },   /* 7: DDR50 */
			{ 800000000, 7, 6, 0, 7, 0, 100000000 },   /* 8: DDR52 */
			{ 1600000000, 7, 5, 4, 15, 0, 200000000 }, /* 9: HS200 */
		},
		{
			/* SD */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },      /* 0: LEGACY 400k */
			{0},                                       /* 1: MMC_HS */
			{ 400000000, 7, 6, 0, 1, 1, 50000000 },    /* 2: SD_HS */
			{ 200000000, 7, 6, 0, 15, 15, 25000000 },  /* 3: SDR12 */
			{ 400000000, 7, 6, 0, 1, 1, 50000000 },    /* 4: SDR25 */
			{ 800000000, 7, 3, 0, 12, 0, 100000000 },  /* 5: SDR50 */
			{ 1600000000, 7, 5, 4, 15, 0, 200000000 }, /* 6: SDR104 */
			{0},                                       /* 7: DDR50 */
			{0},                                       /* 8: DDR52 */
			{0},                                       /* 9: HS200 */
		},
		{
			/* SDIO */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },      /* 0: LEGACY 400k */
			{0},                                       /* 1: MMC_HS */
			{ 400000000, 7, 6, 0, 15, 15, 50000000 },  /* 2: SD_HS */
			{ 200000000, 7, 6, 0, 15, 15, 25000000 },  /* 3: SDR12 */
			{ 400000000, 7, 6, 0, 15, 15, 50000000 },  /* 4: SDR25 */
			{ 800000000, 7, 5, 0, 12, 0, 100000000 },  /* 5: SDR50 */
			{ 1600000000, 7, 5, 4, 15, 0, 200000000 }, /* 6: SDR104 */
			{0},                                       /* 7: DDR50 */
			{0},                                       /* 8: DDR52 */
			{0},                                       /* 9: HS200 */
		}
};

static int hs_timing_config_aries_cs
	[][TUNING_INIT_TIMING_MODE][TUNING_INIT_CONFIG_NUM] = {
		/* bus_clk, div, drv_phase, sam_dly, sam_phase_max, sam_phase_min, input_clk */
		{
			/* MMC */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },      /* 0: LEGACY 400k */
			{ 480000000, 9, 6, 0, 1, 1, 48000000 },    /* 1: MMC_HS */
			{ 200000000, 7, 6, 0, 15, 15, 25000000 },  /* 2: SD_HS */
			{ 200000000, 7, 6, 0, 15, 15, 25000000 },  /* 3: SDR12 */
			{ 400000000, 7, 6, 0, 15, 15, 50000000 },  /* 4: SDR25 */
			{ 800000000, 7, 4, 0, 12, 0, 100000000 },  /* 5: SDR50 */
			{ 1600000000, 7, 5, 4, 15, 0, 200000000 }, /* 6: SDR104 */
			{ 800000000, 7, 6, 0, 7, 0, 100000000 },   /* 7: DDR50 */
			{ 800000000, 7, 6, 0, 7, 0, 100000000 },   /* 8: DDR52 */
			{ 1920000000, 9, 5, 4, 15, 0, 192000000 }, /* 9: HS200 */
		},
		{
			/* SD */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },     /* 0: LEGACY 400k */
			{ 240000000, 9, 8, 0, 3, 3, 24000000 },   /* 1: MMC_HS */
			{ 480000000, 9, 7, 0, 4, 4, 48000000 },   /* 2: SD_HS */
			{ 240000000, 9, 8, 0, 19, 19, 24000000 }, /* 3: SDR12 */
			{ 480000000, 9, 7, 0, 3, 3, 48000000 },   /* 4: SDR25 */
			{ 960000000, 9, 4, 0, 16, 0, 96000000 },  /* 5: SDR50 */
			{ 960000000, 4, 2, 1, 9, 0, 192000000 },  /* 6: SDR104 */
			{0},                                      /* 7: DDR50 */
			{0},                                      /* 8: DDR52 */
			{0},                                      /* 9: HS200 */
		},
		{
			/* SDIO */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },      /* 0: LEGACY 400k */
			{0},                                       /* 1: MMC_HS */
			{ 480000000, 9, 7, 0, 19, 19, 48000000 },  /* 2: SD_HS */
			{ 240000000, 9, 8, 0, 19, 19, 24000000 },  /* 3: SDR12 */
			{ 480000000, 9, 7, 0, 19, 19, 48000000 },  /* 4: SDR25 */
			{ 960000000, 9, 4, 0, 16, 0, 96000000 },   /* 5: SDR50 */
			{ 1200000000, 6, 4, 0, 13, 0, 171000000 }, /* 6: SDR104 */
			{0},                                       /* 7: DDR50 */
			{0},                                       /* 8: DDR52 */
			{0},                                       /* 9: HS200 */
		}
};

static int hs_timing_config_libra
	[][TUNING_INIT_TIMING_MODE][TUNING_INIT_CONFIG_NUM] = {
		/* bus_clk, div, drv_phase, sam_dly, sam_phase_max, sam_phase_min, input_clk */
		{
			/* MMC */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },      /* 0: LEGACY 400k */
			{ 480000000, 9, 6, 0, 1, 1, 48000000 },    /* 1: MMC_HS */
			{ 200000000, 7, 6, 0, 15, 15, 25000000 },  /* 2: SD_HS */
			{ 200000000, 7, 6, 0, 15, 15, 25000000 },  /* 3: SDR12 */
			{ 400000000, 7, 6, 0, 15, 15, 50000000 },  /* 4: SDR25 */
			{ 800000000, 7, 4, 0, 12, 0, 100000000 },  /* 5: SDR50 */
			{ 1600000000, 7, 5, 4, 15, 0, 200000000 }, /* 6: SDR104 */
			{ 800000000, 7, 6, 0, 7, 0, 100000000 },   /* 7: DDR50 */
			{ 800000000, 7, 6, 0, 7, 0, 100000000 },   /* 8: DDR52 */
			{ 1920000000, 9, 5, 4, 15, 0, 192000000 }, /* 9: HS200 */
		},
		{
			/* SD */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },      /* 0: LEGACY 400k */
			{ 203000000, 8, 6, 0, 0, 0, 22500000 },    /* 1: MMC_HS */
			{ 406000000, 8, 6, 0, 1, 1, 45000000 },    /* 2: SD_HS */
			{ 203000000, 8, 6, 0, 0, 0, 22500000 },    /* 3: SDR12 */
			{ 406000000, 8, 6, 0, 1, 1, 45000000 },    /* 4: SDR25 */
			{ 812000000, 8, 4, 0, 13, 0, 90000000 },   /* 5: SDR50 */
			{ 1623000000, 8, 6, 4, 17, 0, 180000000 }, /* 6: SDR104 */
			{0},                                       /* 7: DDR50 */
			{0},                                       /* 8: DDR52 */
#ifdef CONFIG_MMC_DW_MUX_SDSIM_LIBRA
			{ 1623000000, 8, 6, 4, 17, 0, 180000000 }, /* 9: HS200 */
#else
			{0},                                       /* 9: HS200 */
#endif
		},
		{
			/* SDIO */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },      /* 0: LEGACY 400k */
			{0},                                       /* 1: MMC_HS */
			{ 406000000, 8, 6, 0, 17, 17, 45000000 },  /* 2: SD_HS */
			{ 203000000, 8, 6, 0, 17, 17, 22500000 },  /* 3: SDR12 */
			{ 406000000, 8, 6, 0, 17, 17, 45000000 },  /* 4: SDR25 */
			{ 812000000, 8, 4, 0, 13, 0, 90000000 },   /* 5: SDR50 */
			{ 1623000000, 8, 5, 4, 17, 0, 180000000 }, /* 6: SDR104 */
			{0},                                       /* 7: DDR50 */
			{0},                                       /* 8: DDR52 */
			{0},                                       /* 9: HS200 */
		}
};

static int hs_timing_config_libra_c50
	[][TUNING_INIT_TIMING_MODE][TUNING_INIT_CONFIG_NUM] = {
		/* bus_clk, div, drv_phase, sam_dly, sam_phase_max, sam_phase_min, input_clk */
		{
			/* MMC */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },      /* 0: LEGACY 400k */
			{ 480000000, 9, 6, 0, 1, 1, 48000000 },    /* 1: MMC_HS */
			{ 200000000, 7, 6, 0, 15, 15, 25000000 },  /* 2: SD_HS */
			{ 200000000, 7, 6, 0, 15, 15, 25000000 },  /* 3: SDR12 */
			{ 400000000, 7, 6, 0, 15, 15, 50000000 },  /* 4: SDR25 */
			{ 800000000, 7, 4, 0, 12, 0, 100000000 },  /* 5: SDR50 */
			{ 1600000000, 7, 5, 4, 15, 0, 200000000 }, /* 6: SDR104 */
			{ 800000000, 7, 6, 0, 7, 0, 100000000 },   /* 7: DDR50 */
			{ 800000000, 7, 6, 0, 7, 0, 100000000 },   /* 8: DDR52 */
			{ 1920000000, 9, 5, 4, 15, 0, 192000000 }, /* 9: HS200 */
		},
		{
			/* SD */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },      /* 0: LEGACY 400k */
			{ 203000000, 8, 6, 0, 0, 0, 22500000 },    /* 1: MMC_HS */
			{ 406000000, 8, 6, 0, 1, 1, 45000000 },    /* 2: SD_HS */
			{ 203000000, 8, 6, 0, 0, 0, 22500000 },    /* 3: SDR12 */
			{ 406000000, 8, 6, 0, 1, 1, 45000000 },    /* 4: SDR25 */
			{ 812000000, 8, 4, 0, 13, 0, 90000000 },   /* 5: SDR50 */
			{ 1623000000, 8, 6, 2, 17, 0, 180000000 }, /* 6: SDR104 */
			{0},                                       /* 7: DDR50 */
			{0},                                       /* 8: DDR52 */
			{ 1623000000, 8, 6, 2, 17, 0, 180000000 }, /* 9: HS200 */
		},
		{
			/* SDIO */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },      /* 0: LEGACY 400k */
			{0},                                       /* 1: MMC_HS */
			{ 406000000, 8, 6, 0, 17, 17, 45000000 },  /* 2: SD_HS */
			{ 203000000, 8, 6, 0, 17, 17, 22500000 },  /* 3: SDR12 */
			{ 406000000, 8, 6, 0, 17, 17, 45000000 },  /* 4: SDR25 */
			{ 812000000, 8, 4, 0, 11, 0, 90000000 },   /* 5: SDR50 */
			{ 1623000000, 8, 6, 2, 17, 0, 180000000 }, /* 6: SDR104 */
			{0},                                       /* 7: DDR50 */
			{0},                                       /* 8: DDR52 */
			{0},                                       /* 9: HS200 */
		}
};

static int hs_timing_config_libra_c60
	[][TUNING_INIT_TIMING_MODE][TUNING_INIT_CONFIG_NUM] = {
		/* bus_clk, div, drv_phase, sam_dly, sam_phase_max, sam_phase_min, input_clk */
		{
			/* MMC */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },      /* 0: LEGACY 400k */
			{ 480000000, 9, 6, 0, 1, 1, 48000000 },    /* 1: MMC_HS */
			{ 200000000, 7, 6, 0, 15, 15, 25000000 },  /* 2: SD_HS */
			{ 200000000, 7, 6, 0, 15, 15, 25000000 },  /* 3: SDR12 */
			{ 400000000, 7, 6, 0, 15, 15, 50000000 },  /* 4: SDR25 */
			{ 800000000, 7, 4, 0, 12, 0, 100000000 },  /* 5: SDR50 */
			{ 1600000000, 7, 5, 4, 15, 0, 200000000 }, /* 6: SDR104 */
			{ 800000000, 7, 6, 0, 7, 0, 100000000 },   /* 7: DDR50 */
			{ 800000000, 7, 6, 0, 7, 0, 100000000 },   /* 8: DDR52 */
			{ 1920000000, 9, 5, 4, 15, 0, 192000000 }, /* 9: HS200 */
		},
		{
			/* SD */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },      /* 0: LEGACY 400k */
			{ 203000000, 8, 6, 0, 0, 0, 22500000 },    /* 1: MMC_HS */
			{ 406000000, 8, 6, 0, 1, 1, 45000000 },    /* 2: SD_HS */
			{ 203000000, 8, 6, 0, 0, 0, 22500000 },    /* 3: SDR12 */
			{ 406000000, 8, 6, 0, 1, 1, 45000000 },    /* 4: SDR25 */
			{ 812000000, 8, 4, 0, 13, 0, 90000000 },   /* 5: SDR50 */
			{ 1623000000, 8, 6, 2, 17, 0, 180000000 }, /* 6: SDR104 */
			{0},                                       /* 7: DDR50 */
			{0},                                       /* 8: DDR52 */
			{ 1623000000, 8, 6, 2, 17, 0, 180000000 }, /* 9: HS200 */
		},
		{
			/* SDIO */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },      /* 0: LEGACY 400k */
			{0},                                       /* 1: MMC_HS */
			{ 406000000, 8, 6, 0, 17, 17, 45000000 },  /* 2: SD_HS */
			{ 203000000, 8, 6, 0, 17, 17, 22500000 },  /* 3: SDR12 */
			{ 406000000, 8, 6, 0, 17, 17, 45000000 },  /* 4: SDR25 */
			{ 812000000, 8, 4, 0, 11, 0, 90000000 },   /* 5: SDR50 */
			{ 1623000000, 7, 5, 2, 15, 0, 203000000 }, /* 6: SDR104 */
			{0},                                       /* 7: DDR50 */
			{0},                                       /* 8: DDR52 */
			{0},                                       /* 9: HS200 */
		}
};

static int hs_timing_config_cancer_cs
	[][TUNING_INIT_TIMING_MODE][TUNING_INIT_CONFIG_NUM] = {
		/* bus_clk, div, drv_phase, sam_dly, sam_phase_max, sam_phase_min, input_clk */
		{
			/* MMC */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },    /* 0: LEGACY 400k */
			{ 240000000, 4, 3, 0, 0, 0, 48000000 },  /* 1: MMC_HS */
			{ 120000000, 4, 3, 0, 9, 9, 24000000 },  /* 2: SD_DS */
			{ 120000000, 4, 3, 0, 9, 9, 24000000 },  /* 3: SDR12 */
			{ 240000000, 4, 3, 0, 0, 0, 48000000 },  /* 4: SDR25 */
			{ 480000000, 4, 2, 0, 5, 0, 96000000 },  /* 5: SDR50 */
			{ 960000000, 4, 4, 2, 9, 0, 192000000 }, /* 6: SDR104 */
			{0},                                     /* 7: DDR50 */
			{0},                                     /* 8: DDR52 */
			{ 960000000, 4, 4, 2, 9, 0, 192000000 }, /* 9: HS200 */
		},
		{
			/* SD */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },    /* 0: LEGACY 400k */
			{ 120000000, 4, 3, 0, 3, 3, 24000000 },  /* 1: SD_DS */
			{ 240000000, 4, 3, 0, 9, 9, 48000000 },  /* 2: SD_HS */
			{ 120000000, 4, 3, 0, 9, 9, 24000000 },  /* 3: SDR12 */
			{ 240000000, 4, 3, 0, 0, 0, 48000000 },  /* 4: SDR25 */
			{ 480000000, 4, 2, 0, 5, 0, 96000000 },  /* 5: SDR50 */
			{ 960000000, 4, 4, 2, 9, 0, 192000000 }, /* 6: SDR104 */
			{0},                                     /* 7: DDR50 */
			{0},                                     /* 8: DDR52 */
			{ 960000000, 4, 4, 2, 9, 0, 192000000 }, /* 9: HS200 */
		},
		{
			/* SDIO */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },    /* 0: LEGACY 400k */
			{0},                                     /* 1: MMC_HS */
			{0},                                     /* 2: SD_HS */
			{ 120000000, 4, 3, 0, 9, 9, 24000000 },  /* 3: SDR12 */
			{ 240000000, 4, 3, 0, 0, 0, 48000000 },  /* 4: SDR25 */
			{ 480000000, 4, 2, 0, 5, 0, 96000000 },  /* 5: SDR50 */
			{ 960000000, 4, 4, 2, 9, 0, 192000000 }, /* 6: SDR104 */
			{0},                                     /* 7: DDR50 */
			{0},                                     /* 8: DDR52 */
			{0},                                     /* 9: HS200 */
		}
};

static int hs_timing_config_capricorn
	[][TUNING_INIT_TIMING_MODE][TUNING_INIT_CONFIG_NUM] = {
		/* bus_clk, div, drv_phase, sam_dly, sam_phase_max, sam_phase_min, input_clk */
		{
			/* MMC */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },    /* 0: LEGACY 400k */
			{ 240000000, 4, 3, 0, 0, 0, 48000000 },  /* 1: MMC_HS */
			{ 120000000, 4, 3, 0, 9, 9, 24000000 },  /* 2: SD_DS */
			{ 120000000, 4, 3, 0, 9, 9, 24000000 },  /* 3: SDR12 */
			{ 240000000, 4, 3, 0, 0, 0, 48000000 },  /* 4: SDR25 */
			{ 480000000, 4, 2, 0, 5, 0, 96000000 },  /* 5: SDR50 */
			{ 960000000, 4, 3, 2, 9, 0, 192000000 }, /* 6: SDR104 */
			{0},                                     /* 7: DDR50 */
			{0},                                     /* 8: DDR52 */
			{ 960000000, 4, 3, 2, 9, 0, 192000000 }, /* 9: HS200 */
		},
		{
			/* SD */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },    /* 0: LEGACY 400k */
			{ 120000000, 4, 3, 0, 3, 3, 24000000 },  /* 1: SD_DS */
			{ 240000000, 4, 3, 0, 2, 2, 48000000 },  /* 2: SD_HS */
			{ 120000000, 4, 3, 0, 9, 9, 24000000 },  /* 3: SDR12 */
			{ 240000000, 4, 3, 0, 0, 0, 48000000 },  /* 4: SDR25 */
			{ 480000000, 4, 2, 0, 5, 0, 96000000 },  /* 5: SDR50 */
			{ 960000000, 4, 3, 2, 9, 0, 192000000 }, /* 6: SDR104 */
			{0},                                     /* 7: DDR50 */
			{0},                                     /* 8: DDR52 */
			{ 960000000, 4, 3, 2, 9, 0, 192000000 }, /* 9: HS200 */
		},
		{
			/* SDIO */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },    /* 0: LEGACY 400k */
			{0},                                     /* 1: MMC_HS */
			{0},                                     /* 2: SD_HS */
			{ 120000000, 4, 3, 0, 9, 9, 24000000 },  /* 3: SDR12 */
			{ 240000000, 4, 3, 0, 0, 0, 48000000 },  /* 4: SDR25 */
			{ 480000000, 4, 2, 0, 5, 0, 96000000 },  /* 5: SDR50 */
			{ 960000000, 4, 3, 2, 9, 0, 192000000 }, /* 6: SDR104 */
			{0},                                     /* 7: DDR50 */
			{0},                                     /* 8: DDR52 */
			{0},                                     /* 9: HS200 */
		}
};

static int hs_timing_config_taurus_cs
	[][TUNING_INIT_TIMING_MODE][TUNING_INIT_CONFIG_NUM] = {
		/* bus_clk, div, drv_phase, sam_dly, sam_phase_max, sam_phase_min, input_clk */
		{
			/* MMC */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },      /* 0: LEGACY 400k */
			{ 480000000, 9, 7, 0, 19, 19, 48000000 },  /* 1: MMC_HS */
			{ 200000000, 7, 6, 0, 15, 15, 25000000 },  /* 2: SD_HS */
			{ 200000000, 7, 6, 0, 15, 15, 25000000 },  /* 3: SDR12 */
			{ 400000000, 7, 6, 0, 15, 15, 50000000 },  /* 4: SDR25 */
			{ 800000000, 7, 4, 0, 12, 0, 100000000 },  /* 5: SDR50 */
			{ 1600000000, 7, 5, 4, 15, 0, 200000000 }, /* 6: SDR104 */
			{ 800000000, 7, 6, 0, 7, 0, 100000000 },   /* 7: DDR50 */
			{ 800000000, 7, 6, 0, 7, 0, 100000000 },   /* 8: DDR52 */
			{ 1920000000, 9, 7, 4, 19, 0, 192000000 }, /* 9: HS200 */
		},
		{
			/* SD */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },    /* 0: LEGACY 400k */
			{ 120000000, 4, 3, 0, 9, 9, 24000000 },  /* 1: MMC_HS */
			{ 240000000, 4, 2, 0, 0, 0, 48000000 },  /* 2: SD_HS */
			{ 120000000, 4, 3, 0, 4, 4, 24000000 },  /* 3: SDR12 */
			{ 240000000, 4, 2, 0, 0, 0, 48000000 },  /* 4: SDR25 */
			{ 480000000, 4, 2, 0, 5, 0, 96000000 },  /* 5: SDR50 */
			{ 960000000, 4, 3, 3, 9, 0, 192000000 }, /* 6: SDR104 */
			{0},                                     /* 7: DDR50 */
			{0},                                     /* 8: DDR52 */
			{ 960000000, 4, 3, 3, 9, 0, 192000000 }, /* 9: HS200 */
		},
		{
			/* SDIO */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },      /* 0: LEGACY 400k */
			{0},                                       /* 1: MMC_HS */
			{0},                                       /* 2: SD_HS */
			{ 197000000, 7, 8, 0, 15, 15, 25000000 },  /* 3: SDR12 */
			{ 394000000, 7, 7, 0, 1, 1, 49000000 },    /* 4: SDR25 */
			{ 787000000, 7, 5, 0, 8, 0, 98000000 },    /* 5: SDR50 */
			{ 1573000000, 7, 5, 6, 15, 0, 197000000 }, /* 6: SDR104 */
			{0},                                       /* 7: DDR50 */
			{0},                                       /* 8: DDR52 */
			{0},                                       /* 9: HS200 */
		}
};

static int hs_timing_config_taurus_cs2
	[][TUNING_INIT_TIMING_MODE][TUNING_INIT_CONFIG_NUM] = {
		/* bus_clk, div, drv_phase, sam_dly, sam_phase_max, sam_phase_min, input_clk */
		{
			/* MMC */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },      /* 0: LEGACY 400k */
			{ 480000000, 9, 7, 0, 19, 19, 48000000 },  /* 1: MMC_HS */
			{ 200000000, 7, 6, 0, 15, 15, 25000000 },  /* 2: SD_HS */
			{ 200000000, 7, 6, 0, 15, 15, 25000000 },  /* 3: SDR12 */
			{ 400000000, 7, 6, 0, 15, 15, 50000000 },  /* 4: SDR25 */
			{ 800000000, 7, 4, 0, 12, 0, 100000000 },  /* 5: SDR50 */
			{ 1600000000, 7, 5, 4, 15, 0, 200000000 }, /* 6: SDR104 */
			{ 800000000, 7, 6, 0, 7, 0, 100000000 },   /* 7: DDR50 */
			{ 800000000, 7, 6, 0, 7, 0, 100000000 },   /* 8: DDR52 */
			{ 1920000000, 9, 7, 4, 19, 0, 192000000},  /* 9: HS200 */
		},
		{
			/* SD */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },     /* 0: LEGACY 400k */
			{ 120000000, 4, 3, 0, 4, 4, 24000000 },   /* 1: MMC_HS */
			{ 240000000, 4, 2, 0, 0, 0, 48000000 },   /* 2: SD_HS */
			{ 120000000, 4, 3, 0, 9, 9, 24000000 },   /* 3: SDR12 */
			{ 240000000, 4, 2, 0, 0, 0, 48000000 },   /* 4: SDR25 */
			{ 480000000, 4, 2, 0, 5, 0, 96000000 },   /* 5: SDR50 */
			{ 960000000, 4, 3, 3, 9, 0, 192000000 },  /* 6: SDR104 */
			{0},                                      /* 7: DDR50 */
			{0},                                      /* 8: DDR52 */
			{ 960000000, 4, 3, 3, 9, 0, 192000000 },  /* 9: HS200 */
		},
		{
			/* SDIO */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },      /* 0: LEGACY 400k */
			{0},                                       /* 1: MMC_HS */
			{0},                                       /* 2: SD_HS */
			{ 197000000, 7, 8, 0, 2, 2, 25000000 },    /* 3: SDR12 */
			{ 394000000, 7, 7, 0, 1, 1, 49000000 },    /* 4: SDR25 */
			{ 787000000, 7, 5, 0, 8, 0, 98000000 },    /* 5: SDR50 */
			{ 1573000000, 7, 5, 6, 15, 0, 197000000 }, /* 6: SDR104 */
			{0},                                       /* 7: DDR50 */
			{0},                                       /* 8: DDR52 */
			{0},                                       /* 9: HS200 */
		}
};

static int hs_timing_config_pisces
	[][TUNING_INIT_TIMING_MODE][TUNING_INIT_CONFIG_NUM] = {
		/* bus_clk, div, drv_phase, sam_dly, sam_phase_max, sam_phase_min, input_clk */
		{
			/* MMC */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },      /* 0: LEGACY 400k */
			{ 480000000, 9, 7, 0, 19, 19, 48000000 },  /* 1: MMC_HS */
			{ 200000000, 7, 6, 0, 15, 15, 25000000 },  /* 2: SD_HS */
			{ 200000000, 7, 6, 0, 15, 15, 25000000 },  /* 3: SDR12 */
			{ 400000000, 7, 6, 0, 15, 15, 50000000 },  /* 4: SDR25 */
			{ 800000000, 7, 4, 0, 12, 0, 100000000 },  /* 5: SDR50 */
			{ 1600000000, 7, 5, 4, 15, 0, 200000000},  /* 6: SDR104 */
			{ 800000000, 7, 6, 0, 7, 0, 100000000 },   /* 7: DDR50 */
			{ 800000000, 7, 6, 0, 7, 0, 100000000 },   /* 8: DDR52 */
			{ 1920000000, 9, 7, 4, 19, 0, 192000000 }, /* 9: HS200 */
		},
		{
			/* SD */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },     /* 0: LEGACY 400k */
			{ 120000000, 4, 3, 0, 9, 9, 24000000 },   /* 1: MMC_HS */
			{ 240000000, 4, 2, 0, 5, 0, 48000000 },   /* 2: SD_HS */
			{ 120000000, 4, 3, 0, 9, 9, 24000000 },   /* 3: SDR12 */
			{ 240000000, 4, 2, 0, 5, 0, 48000000 },   /* 4: SDR25 */
			{ 480000000, 4, 2, 0, 5, 0, 96000000 },   /* 5: SDR50 */
			{ 960000000, 4, 3, 3, 9, 0, 192000000},   /* 6: SDR104 */
			{0},                                      /* 7: DDR50 */
			{0},                                      /* 8: DDR52 */
			{ 960000000, 4, 3, 3, 9, 0, 192000000 },  /* 9: HS200 */
		},
		{
			/* SDIO */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },     /* 0: LEGACY 400k */
			{0},                                       /* 1: MMC_HS */
			{0},                                       /* 2: SD_HS */
			{ 120000000, 4, 3, 0, 9, 9, 24000000 },   /* 3: SDR12 */
			{ 240000000, 4, 2, 0, 5, 0, 48000000 },   /* 4: SDR25 */
			{ 480000000, 4, 2, 0, 5, 0, 96000000 },   /* 5: SDR50 */
			{ 960000000, 4, 3, 3, 9, 0, 192000000},   /* 6: SDR104 */
			{0},                                       /* 7: DDR50 */
			{0},                                       /* 8: DDR52 */
			{0},                                       /* 9: HS200 */
		}
};

static int hs_timing_config_leo
	[][TUNING_INIT_TIMING_MODE][TUNING_INIT_CONFIG_NUM] = {
		/* bus_clk, div, drv_phase, sam_dly, sam_phase_max, sam_phase_min, input_clk */
		{
			/* MMC */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },      /* 0: LEGACY 400k */
			{ 480000000, 9, 7, 0, 19, 19, 48000000 },  /* 1: MMC_HS */
			{ 200000000, 7, 6, 0, 15, 15, 25000000 },  /* 2: SD_HS */
			{ 200000000, 7, 6, 0, 15, 15, 25000000 },  /* 3: SDR12 */
			{ 400000000, 7, 6, 0, 15, 15, 50000000 },  /* 4: SDR25 */
			{ 800000000, 7, 4, 0, 12, 0, 100000000 },  /* 5: SDR50 */
			{ 1600000000, 7, 5, 4, 15, 0, 200000000 }, /* 6: SDR104 */
			{ 800000000, 7, 6, 0, 7, 0, 100000000 },   /* 7: DDR50 */
			{ 800000000, 7, 6, 0, 7, 0, 100000000 },   /* 8: DDR52 */
			{ 1920000000, 9, 7, 4, 19, 0, 192000000 }, /* 9: HS200 */
		},
		{
			/* SD */
			{ 3200000, 7, 7, 0, 15, 15, 400000 },     /* 0: LEGACY 400k */
			{ 120000000, 4, 3, 0, 6, 6, 24000000 },   /* 1: MMC_HS */
			{ 240000000, 4, 2, 0, 0, 0, 48000000 },   /* 2: SD_HS */
			{ 120000000, 4, 3, 0, 7, 7, 24000000 },   /* 3: SDR12 */
			{ 240000000, 4, 2, 0, 0, 0, 48000000 },   /* 4: SDR25 */
			{ 480000000, 4, 3, 0, 5, 0, 96000000 },   /* 5: SDR50 */
			{ 960000000, 4, 3, 3, 9, 0, 192000000 },  /* 6: SDR104 */
			{0},                                      /* 7: DDR50 */
			{0},                                      /* 8: DDR52 */
			{ 960000000, 4, 3, 3, 9, 0, 192000000 },  /* 9: HS200 */
		},
		{
			/* SDIO */
			{ 3200000, 7, 7, 0, 15, 15, 400000},       /* 0: LEGACY 400k */
			{0},                                       /* 1: MMC_HS */
			{0},                                       /* 2: SD_HS */
			{ 120000000, 4, 3, 0, 7, 7, 25000000 },    /* 3: SDR12 */
			{ 240000000, 4, 3, 0, 0, 0, 48000000 },    /* 4: SDR25 */
			{ 480000000, 4, 3, 0, 8, 0, 96000000 },    /* 5: SDR50 */
			{ 1622016000, 7, 5, 6, 15, 0, 203000000 }, /* 6: SDR104 */
			{0},                                       /* 7: DDR50 */
			{0},                                       /* 8: DDR52 */
			{0},                                       /* 9: HS200 */
		}
};

void dw_mci_hi3xxx_work_fail_reset(struct dw_mci *host);

#endif /* DW_MMC_HI3XXX_ */
